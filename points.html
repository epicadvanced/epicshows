<!DOCTYPE HTML>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.4.1/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyB62qoHWdEnchYSXU7vy3yy-BDwGtiUzuQ",
	authDomain: "epicadvanced19.firebaseapp.com",
	databaseURL: "https://epicadvanced19.firebaseio.com",
	projectId: "epicadvanced19",
	storageBucket: "epicadvanced19.appspot.com",
	messagingSenderId: "295442314130"
	};
      firebase.initializeApp(config);
      var database = firebase.database();
    </script>
    <style>
      html {
        height: 100%;
      }
      body {
	background: linear-gradient(to bottom right, #82d4f2, #f2a4b9);
	background-position: center;
        background-size: cover;
        box-sizing: border-box;
      }
      #backArrow {
	width: 30px;
	height: 30px;
        top-margin: 20px;
	display: inline;
        position: absolute;
	left: 10px;
	top: 10px;
      }
      h1 {
        letter-spacing: 8px; 
        border-bottom-color: rgb(255, 255, 255);
        border-bottom-style: solid;
        border-bottom-width: 1px;
        padding-top: 20px;
        padding-bottom: 20px;
	width: 200px;
	margin: auto;
      }
      h1, h2, p, form {
	  font-family: "Source Sans Pro", sans-serif;
	  color: "white";
      }
    </style>
  </head>
  <body align=center>
    <a href="index.html" align=left><img id="backArrow" src="/images/left-arrow.png"></a>
	  <h1>Points</h1>
    <h2>what are points</h2>
	  <p>you need them or you will fail drama.<br> the more you have, the less erik hates you.<br> do work please.</p>
    <h2>add points</h2>
	  <a href="addPoints.html">Link</a>
    <h2>find my points</h2>
      <form id="getPoints">
	    Name: 
	    <input type="text" id="myName"></input><br>
	    <input type="submit"></input><br>
      </form>
      <div id="myPoints"></div>
      <br>
    <h2>see current points</h2>
    <script>
	   //Get Points
	    function getPoint(uName) {
	    	firebase.database().ref('points/' + uName.toLowerCase()).once('value').then(function(snapshot) {
		    	var pointsVal = snapshot.val();
		    	var para = $("<p></p>").text(uName + ": " + pointsVal + " points");
		    	$("#myPoints").append(para);
	    	}); 
	    }
	    
	    $("#getPoints").submit(function(event) {
	      	  event.preventDefault();
		  getPoint($("#myName").val());
		  $("#myName").val("");
	      });
	    
	    //Get ALL Points
	    firebase.database().ref('points').once('value', function(snapshot) {
		snapshot.forEach(function(child) {
			var nameVal = child.key;
			var pointsVal = child.val();
			var paraName = $("<p></p>").text("Name: " + nameVal);
		   	var paraPoints = $("<p></p>").text("Points: " + pointsVal);
		   	$("body").append(paraName, paraPoints, "<br>");
		});    
	    });
    </script>
  </body>
</html>
