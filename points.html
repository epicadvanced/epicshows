<!DOCTYPE HTML>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.4.1/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyB62qoHWdEnchYSXU7vy3yy-BDwGtiUzuQ",
	authDomain: "epicadvanced19.firebaseapp.com",
	databaseURL: "https://epicadvanced19.firebaseio.com",
	projectId: "epicadvanced19",
	storageBucket: "epicadvanced19.appspot.com",
	messagingSenderId: "295442314130"
	};
      firebase.initializeApp(config);
      var database = firebase.database();
    </script>
  </head>
  <body>
    <h1>Points!</h1>
    <h2>add points</h2>
    <form id="addPoints">
	    Name: <br>
	    <input type="text" name="addName"></input><br>
	    Points: <br>
	    <input type="text" name="addPoint"></input><br>
	    <input type="submit"></input><br>
    </form>
    <h2>see current points</h2>
    <script>
	   //Get Points
	   /* firebase.database().ref('points').once('value').then(function(snapshot) {
		    var pointsVal = snapshot.val();
		    var para = $("<p></p>").text("Points: " + pointsVal);
		    $("body").append(para);
	    }); */
	    
	    //Get ALL Points
	    firebase.database().ref('points').once('value', function(snapshot) {
		snapshot.forEach(function(child) {
			var nameVal = child.key;
			var pointsVal = child.val();
			var paraName = $("<p></p>").text("Name: " + nameVal);
		   	var paraPoints = $("<p></p>").text("Points: " + pointsVal);
		   	$("body").append(paraName, paraPoints, "<br>");
		});
	    });
	    
	    //Add Points
	    function addPoints(name, pointsVal) {
		firebase.database().ref('/points/' + name).set(pointsVal);
	    }
	    
	    $("#addPoints").submit(function(event) {
		var addName = $("input:first").val();
		var addPoints = $("input:second").val();
		addPoints(addName, addPoints);
		event.preventDefault();    
	    });
    </script>
  </body>
</html>
